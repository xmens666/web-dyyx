<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ¿æºè¯¦æƒ… - ä¸œç€›æ¸¸ä¾ </title>
    <meta name="description" content="ä¸œç€›æ¸¸ä¾ å®¢æ ˆé©¿ç«™ - åœ¨æ—¥åäººæˆ¿å±‹ç§Ÿèµå¹³å°">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#6366F1">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .loading-spinner { animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .fade-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .gradient-accommodation { background: linear-gradient(135deg, #6366F1 0%, #8B5CF6 50%, #A855F7 100%); }
        .facility-tag { display: inline-flex; align-items: center; padding: 6px 12px; border-radius: 8px; font-size: 13px; margin: 4px; background: #F3F4F6; color: #4B5563; }
        .facility-tag i { margin-right: 6px; color: #6366F1; }
        .image-slider { scroll-snap-type: x mandatory; -webkit-overflow-scrolling: touch; }
        .image-slider > div { scroll-snap-align: start; flex-shrink: 0; }
        .info-row { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #F3F4F6; }
        .info-row:last-child { border-bottom: none; }
        .info-label { color: #6B7280; font-size: 14px; }
        .info-value { color: #1F2937; font-weight: 500; font-size: 14px; text-align: right; }
        .section-card { background: white; border-radius: 12px; padding: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 16px; }
        .section-title { font-size: 16px; font-weight: 700; color: #1F2937; margin-bottom: 16px; display: flex; align-items: center; }
        .section-title i { margin-right: 8px; }
        .badge { display: inline-flex; align-items: center; padding: 4px 10px; border-radius: 9999px; font-size: 12px; font-weight: 500; margin-right: 6px; margin-bottom: 6px; }
        .badge-green { background: #D1FAE5; color: #065F46; }
        .badge-blue { background: #DBEAFE; color: #1E40AF; }
        .badge-yellow { background: #FEF3C7; color: #92400E; }
        .badge-purple { background: #EDE9FE; color: #5B21B6; }
        .badge-red { background: #FEE2E2; color: #991B1B; }
        .badge-gray { background: #F3F4F6; color: #4B5563; }
        .verified-badge { background: linear-gradient(135deg, #10B981, #059669); color: white; }
    </style>
</head>

<body class="bg-gray-50 min-h-screen">
    <!-- å¯¼èˆªæ  -->
    <nav class="fixed w-full bg-white/95 backdrop-blur-md shadow-sm z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <a href="index.html" class="flex items-center space-x-2">
                <span class="text-lg font-bold text-gray-800">ğŸ¯ ä¸œç€›æ¸¸ä¾ </span>
            </a>
            <a href="accommodation.html" class="text-indigo-500 text-sm hover:text-indigo-600">
                <i class="fas fa-arrow-left mr-1"></i> è¿”å›åˆ—è¡¨
            </a>
        </div>
    </nav>

    <!-- ä¸»å†…å®¹åŒº -->
    <main class="pt-16 pb-24">
        <!-- åŠ è½½çŠ¶æ€ -->
        <div id="loading" class="flex flex-col items-center justify-center min-h-[60vh]">
            <div class="w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full loading-spinner"></div>
            <p class="mt-4 text-gray-500">æ­£åœ¨åŠ è½½æˆ¿æºä¿¡æ¯...</p>
        </div>

        <!-- é”™è¯¯çŠ¶æ€ -->
        <div id="error" class="hidden flex flex-col items-center justify-center min-h-[60vh] px-4">
            <div class="w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mb-4">
                <i class="fas fa-exclamation-triangle text-red-500 text-3xl"></i>
            </div>
            <h2 class="text-xl font-bold text-gray-800 mb-2">æˆ¿æºä¸å­˜åœ¨</h2>
            <p class="text-gray-500 mb-6 text-center">è¯¥æˆ¿æºå¯èƒ½å·²ä¸‹æ¶æˆ–é“¾æ¥æ— æ•ˆ</p>
            <a href="accommodation.html" class="bg-indigo-500 text-white px-6 py-2 rounded-full hover:bg-indigo-600 transition">
                è¿”å›åˆ—è¡¨
            </a>
        </div>

        <!-- æˆ¿æºå†…å®¹ -->
        <div id="content" class="hidden fade-in">
            <!-- å›¾ç‰‡è½®æ’­ -->
            <div class="relative bg-black">
                <div id="imageSlider" class="image-slider flex overflow-x-auto">
                    <!-- å›¾ç‰‡å°†åŠ¨æ€æ’å…¥ -->
                </div>
                <div id="imageCounter" class="absolute bottom-4 right-4 bg-black/60 text-white px-3 py-1 rounded-full text-sm">
                    1 / 1
                </div>
            </div>

            <div class="container mx-auto px-4 py-6">
                <!-- æˆ¿æºæ ‡é¢˜åŒº -->
                <div class="section-card">
                    <div id="badgeContainer" class="flex flex-wrap mb-3">
                        <!-- æ ‡ç­¾å°†åŠ¨æ€æ’å…¥ -->
                    </div>
                    <h1 id="accommodationTitle" class="text-xl sm:text-2xl font-bold text-gray-900 mb-3"></h1>
                    <p id="accommodationLocation" class="text-gray-500 text-sm mb-4">
                        <i class="fas fa-map-marker-alt mr-1"></i>
                    </p>

                    <!-- ä»·æ ¼ -->
                    <div class="flex items-baseline gap-2 flex-wrap">
                        <span class="text-3xl sm:text-4xl font-bold text-red-500" id="accommodationPrice"></span>
                        <span class="text-gray-500" id="priceUnit">/æœˆ</span>
                        <span id="originalPrice" class="hidden text-lg text-gray-400 line-through"></span>
                        <span id="discountBadge" class="hidden badge badge-red"></span>
                        <span id="negotiableBadge" class="hidden badge badge-yellow">å¯è®®ä»·</span>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <!-- å·¦ä¾§ï¼šæˆ¿æºè¯¦æƒ… -->
                    <div class="lg:col-span-2 space-y-4">

                        <!-- å±…ä½ç±»æˆ¿å±‹ä¿¡æ¯ -->
                        <div id="livingInfoSection" class="section-card hidden">
                            <h2 class="section-title">
                                <i class="fas fa-home text-indigo-500"></i>æˆ¿å±‹ä¿¡æ¯
                            </h2>
                            <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 mb-4">
                                <div class="text-center p-3 bg-gray-50 rounded-lg">
                                    <p class="text-gray-500 text-xs mb-1">æˆ·å‹/é—´å–</p>
                                    <p id="roomMadori" class="font-bold text-gray-800">-</p>
                                </div>
                                <div class="text-center p-3 bg-gray-50 rounded-lg">
                                    <p class="text-gray-500 text-xs mb-1">é¢ç§¯</p>
                                    <p id="roomArea" class="font-bold text-gray-800">-</p>
                                </div>
                                <div class="text-center p-3 bg-gray-50 rounded-lg">
                                    <p class="text-gray-500 text-xs mb-1">æ¥¼å±‚</p>
                                    <p id="roomFloor" class="font-bold text-gray-800">-</p>
                                </div>
                                <div class="text-center p-3 bg-gray-50 rounded-lg">
                                    <p class="text-gray-500 text-xs mb-1">æœå‘</p>
                                    <p id="roomOrientation" class="font-bold text-gray-800">-</p>
                                </div>
                            </div>
                            <div id="livingDetails">
                                <!-- è¯¦ç»†ä¿¡æ¯è¡Œå°†åŠ¨æ€æ’å…¥ -->
                            </div>
                        </div>

                        <!-- ä»“åº“ä¿¡æ¯ -->
                        <div id="warehouseInfoSection" class="section-card hidden">
                            <h2 class="section-title">
                                <i class="fas fa-warehouse text-gray-500"></i>ä»“åº“ä¿¡æ¯
                            </h2>
                            <div id="warehouseDetails">
                                <!-- ä»“åº“è¯¦ç»†ä¿¡æ¯å°†åŠ¨æ€æ’å…¥ -->
                            </div>
                        </div>

                        <!-- åœŸåœ°ä¿¡æ¯ -->
                        <div id="landInfoSection" class="section-card hidden">
                            <h2 class="section-title">
                                <i class="fas fa-mountain text-green-500"></i>åœŸåœ°ä¿¡æ¯
                            </h2>
                            <div id="landDetails">
                                <!-- åœŸåœ°è¯¦ç»†ä¿¡æ¯å°†åŠ¨æ€æ’å…¥ -->
                            </div>
                        </div>

                        <!-- åŠå…¬å®¤ä¿¡æ¯ -->
                        <div id="officeInfoSection" class="section-card hidden">
                            <h2 class="section-title">
                                <i class="fas fa-building text-blue-500"></i>åŠå…¬å®¤ä¿¡æ¯
                            </h2>
                            <div id="officeDetails">
                                <!-- åŠå…¬å®¤è¯¦ç»†ä¿¡æ¯å°†åŠ¨æ€æ’å…¥ -->
                            </div>
                        </div>

                        <!-- è¯¦ç»†ä»‹ç» -->
                        <div class="section-card">
                            <h2 class="section-title">
                                <i class="fas fa-info-circle text-blue-500"></i>æˆ¿æºä»‹ç»
                            </h2>
                            <p id="accommodationDescription" class="text-gray-700 whitespace-pre-wrap leading-relaxed"></p>
                        </div>

                        <!-- é…å¥—è®¾æ–½ -->
                        <div id="featuresSection" class="section-card hidden">
                            <h2 class="section-title">
                                <i class="fas fa-couch text-purple-500"></i>é…å¥—è®¾æ–½
                            </h2>
                            <div id="featuresList" class="flex flex-wrap">
                                <!-- è®¾æ–½å°†åŠ¨æ€æ’å…¥ -->
                            </div>
                        </div>

                        <!-- å…¥ä½è§„åˆ™ -->
                        <div id="rulesSection" class="section-card hidden">
                            <h2 class="section-title">
                                <i class="fas fa-clipboard-list text-orange-500"></i>å…¥ä½è§„åˆ™
                            </h2>
                            <div id="rulesList" class="text-gray-700">
                                <!-- è§„åˆ™å°†åŠ¨æ€æ’å…¥ -->
                            </div>
                        </div>

                        <!-- è´¹ç”¨æ˜ç»† -->
                        <div class="section-card">
                            <h2 class="section-title">
                                <i class="fas fa-yen-sign text-green-500"></i>è´¹ç”¨æ˜ç»†
                            </h2>
                            <div id="feeDetails">
                                <!-- è´¹ç”¨æ˜ç»†å°†åŠ¨æ€æ’å…¥ -->
                            </div>
                        </div>

                        <!-- æ”¯ä»˜æ–¹å¼ -->
                        <div id="paymentSection" class="section-card hidden">
                            <h2 class="section-title">
                                <i class="fas fa-credit-card text-blue-500"></i>æ”¯ä»˜æ–¹å¼
                            </h2>
                            <div id="paymentMethods" class="flex flex-wrap">
                                <!-- æ”¯ä»˜æ–¹å¼å°†åŠ¨æ€æ’å…¥ -->
                            </div>
                        </div>

                        <!-- é™„åŠ ä¿¡æ¯ -->
                        <div id="additionalSection" class="section-card hidden">
                            <h2 class="section-title">
                                <i class="fas fa-plus-circle text-gray-500"></i>é™„åŠ ä¿¡æ¯
                            </h2>
                            <p id="additionalInfo" class="text-gray-700 whitespace-pre-wrap"></p>
                        </div>
                    </div>

                    <!-- å³ä¾§ï¼šè”ç³»ä¿¡æ¯ -->
                    <div class="space-y-4">
                        <!-- è®¤è¯ä¿¡æ¯ -->
                        <div id="verificationSection" class="section-card hidden">
                            <h2 class="section-title">
                                <i class="fas fa-shield-alt text-green-500"></i>è®¤è¯ä¿¡æ¯
                            </h2>
                            <div id="verificationBadges" class="flex flex-wrap">
                                <!-- è®¤è¯æ ‡ç­¾å°†åŠ¨æ€æ’å…¥ -->
                            </div>
                        </div>

                        <!-- æˆ¿ä¸œä¿¡æ¯ -->
                        <div class="section-card">
                            <h2 class="section-title">
                                <i class="fas fa-user text-orange-500"></i>å‘å¸ƒè€…
                            </h2>
                            <div class="flex items-center gap-4 mb-4">
                                <img id="ownerAvatar" src="" alt="å¤´åƒ"
                                     class="w-14 h-14 rounded-full object-cover border-2 border-gray-100">
                                <div>
                                    <h3 id="ownerName" class="font-bold text-gray-800"></h3>
                                    <p id="ownerType" class="text-gray-500 text-sm"></p>
                                </div>
                            </div>
                            <div id="contactInfo" class="text-sm text-gray-600 space-y-2">
                                <!-- è”ç³»æ–¹å¼å°†åŠ¨æ€æ’å…¥ -->
                            </div>
                        </div>

                        <!-- ä¸‹è½½APPè”ç³» -->
                        <div class="bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl p-6 text-white">
                            <div class="text-center">
                                <div class="w-14 h-14 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <i class="fas fa-comments text-2xl"></i>
                                </div>
                                <h3 class="font-bold text-lg mb-2">è”ç³»æˆ¿ä¸œçœ‹æˆ¿</h3>
                                <p class="text-white/80 text-sm mb-4">ä¸‹è½½APPä¸æˆ¿ä¸œç›´æ¥æ²Ÿé€šï¼Œé¢„çº¦çœ‹æˆ¿</p>
                                <a href="https://pub-3e154ce6d5c8487f833628106145e7a2.r2.dev/APK/dongyingyouxia_v1.5.8.apk" download
                                   class="block bg-white text-indigo-600 py-3 rounded-xl font-bold hover:bg-indigo-50 transition">
                                    <i class="fab fa-android mr-2"></i> ä¸‹è½½APPè”ç³»
                                </a>
                            </div>
                        </div>

                        <!-- çœ‹æˆ¿æç¤º -->
                        <div class="bg-yellow-50 rounded-xl p-4 border border-yellow-100">
                            <h4 class="font-medium text-yellow-800 mb-2 flex items-center">
                                <i class="fas fa-lightbulb mr-2"></i>
                                çœ‹æˆ¿æç¤º
                            </h4>
                            <ul class="text-yellow-700 text-sm space-y-1">
                                <li>â€¢ å®åœ°çœ‹æˆ¿å‰è¯·å…ˆè”ç³»ç¡®è®¤</li>
                                <li>â€¢ ç­¾çº¦å‰è¯·æ ¸å®æˆ¿æºçœŸå®æ€§</li>
                                <li>â€¢ å¹³å°æä¾›æ‹…ä¿äº¤æ˜“ä¿éšœ</li>
                                <li>â€¢ å¦‚é‡é—®é¢˜å¯è”ç³»å®¢æœå¤„ç†</li>
                            </ul>
                        </div>

                        <!-- ä½ç½®ä¿¡æ¯ -->
                        <div class="section-card">
                            <h2 class="section-title">
                                <i class="fas fa-map-marked-alt text-blue-500"></i>ä½ç½®ä¿¡æ¯
                            </h2>
                            <div id="locationDetails" class="space-y-2 text-sm text-gray-600">
                                <!-- ä½ç½®ä¿¡æ¯å°†åŠ¨æ€æ’å…¥ -->
                            </div>
                            <a id="mapLink" href="#" target="_blank"
                               class="block text-center bg-gray-100 text-gray-700 py-2 rounded-lg hover:bg-gray-200 transition mt-4">
                                <i class="fas fa-external-link-alt mr-2"></i>åœ¨åœ°å›¾ä¸­æŸ¥çœ‹
                            </a>
                        </div>

                        <!-- ç»Ÿè®¡ä¿¡æ¯ -->
                        <div class="section-card">
                            <h2 class="section-title">
                                <i class="fas fa-chart-bar text-indigo-500"></i>æµè§ˆç»Ÿè®¡
                            </h2>
                            <div class="flex justify-around text-center">
                                <div>
                                    <p id="viewCount" class="text-2xl font-bold text-indigo-500">0</p>
                                    <p class="text-xs text-gray-500">æµè§ˆé‡</p>
                                </div>
                                <div>
                                    <p id="favoriteCount" class="text-2xl font-bold text-pink-500">0</p>
                                    <p class="text-xs text-gray-500">æ”¶è—æ•°</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- åº•éƒ¨å›ºå®šæ  -->
    <div id="bottomBar" class="hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-3 z-40">
        <div class="container mx-auto flex items-center justify-between gap-4">
            <div class="flex-shrink-0">
                <p class="text-gray-500 text-xs" id="bottomPriceLabel">æœˆç§Ÿé‡‘</p>
                <p class="text-red-500 font-bold text-xl" id="bottomPrice"></p>
            </div>
            <a href="https://pub-3e154ce6d5c8487f833628106145e7a2.r2.dev/APK/dongyingyouxia_v1.5.8.apk" download
               class="flex-1 bg-gradient-to-r from-indigo-500 to-purple-600 text-white text-center py-3 rounded-xl font-bold hover:opacity-90 transition">
                <i class="fab fa-android mr-2"></i> ä¸‹è½½APPçœ‹æˆ¿
            </a>
        </div>
    </div>

    <!-- é¡µè„š -->
    <footer class="bg-gray-900 text-white py-8">
        <div class="container mx-auto px-4 text-center">
            <p class="text-gray-400 text-sm mb-2">ä¸œç€›æ¸¸ä¾  - åœ¨æ—¥åäººçš„ç”Ÿæ´»æœåŠ¡å¹³å°</p>
            <p class="text-gray-500 text-xs">&copy; 2026 æ ªå¼ä¼šç¤¾æ˜‡é™½å•†äº‹</p>
        </div>
    </footer>

    <!-- APIé…ç½® -->
    <script src="api-config.js"></script>
    <script>
        let accommodationImages = [];
        let currentImageIndex = 0;

        document.addEventListener('DOMContentLoaded', async () => {
            const accommodationId = getUrlParam('id');

            if (!accommodationId) {
                showError();
                return;
            }

            try {
                const accommodation = await getAccommodationById(accommodationId);

                if (!accommodation) {
                    showError();
                    return;
                }

                renderAccommodation(accommodation);

            } catch (err) {
                console.error('åŠ è½½æˆ¿æºå¤±è´¥:', err);
                showError();
            }
        });

        function showError() {
            document.getElementById('loading').classList.add('hidden');
            document.getElementById('error').classList.remove('hidden');
        }

        function renderAccommodation(a) {
            // æ›´æ–°é¡µé¢æ ‡é¢˜
            document.title = `${a.title} - å®¢æ ˆé©¿ç«™`;

            // å¤„ç†å›¾ç‰‡
            accommodationImages = [];
            if (a.images && a.images.length > 0) {
                accommodationImages = a.images;
            } else {
                accommodationImages = [DEFAULT_PRODUCT_IMAGE];
            }

            // å›¾ç‰‡è½®æ’­
            const imageSlider = document.getElementById('imageSlider');
            imageSlider.innerHTML = accommodationImages.map((img, index) => `
                <div class="w-full flex-shrink-0">
                    <img src="${img}" alt="æˆ¿æºå›¾ç‰‡${index + 1}"
                         class="w-full aspect-video object-cover"
                         onerror="this.src='${DEFAULT_PRODUCT_IMAGE}'">
                </div>
            `).join('');
            document.getElementById('imageCounter').textContent = `1 / ${accommodationImages.length}`;

            // å›¾ç‰‡æ»šåŠ¨ç›‘å¬
            imageSlider.addEventListener('scroll', () => {
                const index = Math.round(imageSlider.scrollLeft / imageSlider.clientWidth);
                document.getElementById('imageCounter').textContent = `${index + 1} / ${accommodationImages.length}`;
            });

            // æ ‡ç­¾åŒºåŸŸ
            const badgeContainer = document.getElementById('badgeContainer');
            let badges = [];

            // æˆ¿æºç±»å‹æ ‡ç­¾
            badges.push(`<span class="badge badge-purple">${getAccommodationType(a.accommodation_type)}</span>`);

            // å»ºç­‘ç±»å‹ï¼ˆç§Ÿæˆ¿ç±»ï¼‰
            if (a.building_type && ['rent', 'sharehouse', 'sale'].includes(a.accommodation_type)) {
                badges.push(`<span class="badge badge-blue">${getBuildingType(a.building_type)}</span>`);
            }

            // çŠ¶æ€æ ‡ç­¾
            if (a.status === 'active') {
                badges.push(`<span class="badge badge-green">å¯ç§Ÿ/å¯å”®</span>`);
            } else {
                badges.push(`<span class="badge badge-gray">å·²ç§Ÿå‡º/å·²å”®</span>`);
            }

            // è®¤è¯æ ‡ç­¾
            if (a.is_verified) {
                badges.push(`<span class="badge verified-badge"><i class="fas fa-check-circle mr-1"></i>å·²è®¤è¯</span>`);
            }

            badgeContainer.innerHTML = badges.join('');

            // åŸºæœ¬ä¿¡æ¯
            document.getElementById('accommodationTitle').textContent = a.title;

            // ä½ç½®æ˜¾ç¤º
            const locationParts = [];
            if (a.location_prefecture) locationParts.push(a.location_prefecture);
            if (a.location_city) locationParts.push(a.location_city);
            if (a.location_region) locationParts.push(a.location_region);
            if (a.location_detail) locationParts.push(a.location_detail);
            document.getElementById('accommodationLocation').innerHTML =
                `<i class="fas fa-map-marker-alt mr-1"></i>${locationParts.join(' ') || 'è¯¦ç»†åœ°å€è¯·å’¨è¯¢'}`;

            // ä»·æ ¼
            const price = a.price;
            document.getElementById('accommodationPrice').textContent = formatPrice(price);
            document.getElementById('bottomPrice').textContent = formatPrice(price);

            // ä»·æ ¼å•ä½
            const priceType = a.price_type || 'monthly';
            const priceUnits = {
                'monthly': '/æœˆ',
                'daily': '/å¤©',
                'yearly': '/å¹´',
                'total': 'ï¼ˆæ€»ä»·ï¼‰',
                'sqm': '/ã¡',
                'sale': 'ä¸‡å††'
            };
            const priceUnit = priceUnits[priceType] || '/æœˆ';
            document.getElementById('priceUnit').textContent = priceUnit;
            document.getElementById('bottomPriceLabel').textContent = getPriceLabelByType(priceType);

            // åŸä»·å’ŒæŠ˜æ‰£
            if (a.original_price && a.original_price > price) {
                document.getElementById('originalPrice').textContent = formatPrice(a.original_price);
                document.getElementById('originalPrice').classList.remove('hidden');
                const discount = Math.round((1 - price / a.original_price) * 100);
                document.getElementById('discountBadge').textContent = `${discount}%OFF`;
                document.getElementById('discountBadge').classList.remove('hidden');
            }

            // å¯è®®ä»·
            if (a.is_negotiable) {
                document.getElementById('negotiableBadge').classList.remove('hidden');
            }

            // æ ¹æ®æˆ¿æºç±»å‹æ˜¾ç¤ºä¸åŒä¿¡æ¯æ¿å—
            const type = a.accommodation_type;
            if (['rent', 'sharehouse', 'homestay', 'sale'].includes(type)) {
                renderLivingInfo(a);
            } else if (type === 'warehouse') {
                renderWarehouseInfo(a);
            } else if (['land_rent', 'land_sale'].includes(type)) {
                renderLandInfo(a);
            } else if (type === 'office') {
                renderOfficeInfo(a);
            }

            // è¯¦ç»†ä»‹ç»
            document.getElementById('accommodationDescription').textContent = a.description || 'æš‚æ— è¯¦ç»†ä»‹ç»';

            // é…å¥—è®¾æ–½
            const features = a.features || [];
            if (features.length > 0) {
                document.getElementById('featuresSection').classList.remove('hidden');
                document.getElementById('featuresList').innerHTML = features.map(f => `
                    <span class="facility-tag">
                        <i class="${getFacilityIcon(f)}"></i>${f}
                    </span>
                `).join('');
            }

            // å…¥ä½è§„åˆ™
            if (a.house_rules) {
                document.getElementById('rulesSection').classList.remove('hidden');
                document.getElementById('rulesList').innerHTML = `<p class="whitespace-pre-wrap">${a.house_rules}</p>`;
            }

            // è´¹ç”¨æ˜ç»†
            renderFeeDetails(a);

            // æ”¯ä»˜æ–¹å¼
            if (a.payment_methods && a.payment_methods.length > 0) {
                document.getElementById('paymentSection').classList.remove('hidden');
                document.getElementById('paymentMethods').innerHTML = a.payment_methods.map(m => `
                    <span class="badge badge-blue"><i class="fas fa-credit-card mr-1"></i>${getPaymentMethod(m)}</span>
                `).join('');
            }

            // é™„åŠ ä¿¡æ¯
            if (a.additional_info) {
                document.getElementById('additionalSection').classList.remove('hidden');
                document.getElementById('additionalInfo').textContent = a.additional_info;
            }

            // è®¤è¯ä¿¡æ¯
            renderVerificationInfo(a);

            // æˆ¿ä¸œä¿¡æ¯
            if (a.users) {
                const user = a.users;
                document.getElementById('ownerAvatar').src = user.avatar_url || DEFAULT_AVATAR;
                document.getElementById('ownerAvatar').onerror = function() { this.src = DEFAULT_AVATAR; };
                document.getElementById('ownerName').textContent = a.provider_name || user.nickname || 'æˆ¿ä¸œ';
                document.getElementById('ownerType').textContent = getHostType(a.host_type);
            }

            // è”ç³»æ–¹å¼
            renderContactInfo(a);

            // ä½ç½®ä¿¡æ¯
            renderLocationDetails(a);

            // ç»Ÿè®¡ä¿¡æ¯
            document.getElementById('viewCount').textContent = a.view_count || 0;
            document.getElementById('favoriteCount').textContent = a.favorite_count || 0;

            // æ˜¾ç¤ºå†…å®¹
            document.getElementById('loading').classList.add('hidden');
            document.getElementById('content').classList.remove('hidden');
            document.getElementById('bottomBar').classList.remove('hidden');
        }

        // å±…ä½ç±»æˆ¿æºä¿¡æ¯
        function renderLivingInfo(a) {
            document.getElementById('livingInfoSection').classList.remove('hidden');

            // åŸºæœ¬å‚æ•°
            document.getElementById('roomMadori').textContent = a.madori || (a.bedrooms ? `${a.bedrooms}å®¤` : '-');
            document.getElementById('roomArea').textContent = a.floor_area ? `${a.floor_area}ã¡` : '-';

            // æ¥¼å±‚
            if (a.floor_number && a.total_floors) {
                document.getElementById('roomFloor').textContent = `${a.floor_number}/${a.total_floors}F`;
            } else if (a.floor_number) {
                document.getElementById('roomFloor').textContent = `${a.floor_number}F`;
            }

            // æœå‘
            document.getElementById('roomOrientation').textContent = getOrientation(a.orientation) || '-';

            // è¯¦ç»†ä¿¡æ¯
            const details = [];
            if (a.bedrooms) details.push({ label: 'å§å®¤', value: `${a.bedrooms}é—´` });
            if (a.bathrooms) details.push({ label: 'å«ç”Ÿé—´', value: `${a.bathrooms}é—´` });
            if (a.toilets) details.push({ label: 'å•æ‰€', value: `${a.toilets}é—´` });
            if (a.max_guests) details.push({ label: 'æœ€å¤šå…¥ä½', value: `${a.max_guests}äºº` });
            if (a.building_year) details.push({ label: 'å»ºç­‘å¹´ä»½', value: `${a.building_year}å¹´` });
            if (a.building_structure) details.push({ label: 'å»ºç­‘ç»“æ„', value: getBuildingStructure(a.building_structure) });
            if (a.renovation_status) details.push({ label: 'è£…ä¿®çŠ¶å†µ', value: getRenovationStatus(a.renovation_status) });
            if (a.parking_type) details.push({ label: 'åœè½¦ä½', value: getParkingType(a.parking_type) });
            if (a.parking_spaces) details.push({ label: 'åœè½¦ä½æ•°', value: `${a.parking_spaces}ä¸ª` });
            if (a.pet_policy) details.push({ label: 'å® ç‰©æ”¿ç­–', value: getPetPolicy(a.pet_policy) });
            if (a.min_stay_days) details.push({ label: 'æœ€çŸ­å…¥ä½', value: `${a.min_stay_days}å¤©` });
            if (a.allow_temporary !== undefined) details.push({ label: 'å…è®¸çŸ­ç§Ÿ', value: a.allow_temporary ? 'æ˜¯' : 'å¦' });

            if (details.length > 0) {
                document.getElementById('livingDetails').innerHTML = details.map(d => `
                    <div class="info-row">
                        <span class="info-label">${d.label}</span>
                        <span class="info-value">${d.value}</span>
                    </div>
                `).join('');
            }
        }

        // ä»“åº“ä¿¡æ¯
        function renderWarehouseInfo(a) {
            document.getElementById('warehouseInfoSection').classList.remove('hidden');

            const details = [];
            if (a.floor_area) details.push({ label: 'ä»“åº“é¢ç§¯', value: `${a.floor_area}ã¡` });
            if (a.warehouse_height) details.push({ label: 'ä»“åº“é«˜åº¦', value: `${a.warehouse_height}m` });
            if (a.warehouse_material) details.push({ label: 'å»ºç­‘ææ–™', value: getWarehouseMaterial(a.warehouse_material) });
            if (a.warehouse_door_width) details.push({ label: 'é—¨å®½', value: `${a.warehouse_door_width}m` });
            if (a.warehouse_door_height) details.push({ label: 'é—¨é«˜', value: `${a.warehouse_door_height}m` });
            if (a.warehouse_load_capacity) details.push({ label: 'æ‰¿é‡èƒ½åŠ›', value: `${a.warehouse_load_capacity}kg/ã¡` });
            if (a.warehouse_has_loading_dock !== undefined) details.push({ label: 'è£…å¸å°', value: a.warehouse_has_loading_dock ? 'æœ‰' : 'æ— ' });
            if (a.warehouse_has_forklift !== undefined) details.push({ label: 'å‰è½¦', value: a.warehouse_has_forklift ? 'æœ‰' : 'æ— ' });
            if (a.warehouse_temperature_control) details.push({ label: 'æ¸©æ§è®¾æ–½', value: getTemperatureControl(a.warehouse_temperature_control) });
            if (a.warehouse_security_level) details.push({ label: 'å®‰ä¿ç­‰çº§', value: getSecurityLevel(a.warehouse_security_level) });
            if (a.warehouse_usage_rules) details.push({ label: 'ä½¿ç”¨è§„åˆ™', value: a.warehouse_usage_rules });

            document.getElementById('warehouseDetails').innerHTML = details.map(d => `
                <div class="info-row">
                    <span class="info-label">${d.label}</span>
                    <span class="info-value">${d.value}</span>
                </div>
            `).join('');
        }

        // åœŸåœ°ä¿¡æ¯
        function renderLandInfo(a) {
            document.getElementById('landInfoSection').classList.remove('hidden');

            const details = [];
            if (a.land_area) details.push({ label: 'åœŸåœ°é¢ç§¯', value: `${a.land_area}ã¡` });
            if (a.land_type) details.push({ label: 'åœŸåœ°ç±»å‹', value: getLandType(a.land_type) });
            if (a.land_zoning) details.push({ label: 'ç”¨é€”åœ°åŸŸ', value: getLandZoning(a.land_zoning) });
            if (a.land_building_ratio) details.push({ label: 'å»ºè”½ç‡', value: `${a.land_building_ratio}%` });
            if (a.land_floor_ratio) details.push({ label: 'å®¹ç§¯ç‡', value: `${a.land_floor_ratio}%` });
            if (a.land_road_access) details.push({ label: 'é“è·¯æ¥é“', value: getLandRoadAccess(a.land_road_access) });
            if (a.land_infrastructure) details.push({ label: 'åŸºç¡€è®¾æ–½', value: a.land_infrastructure });
            if (a.land_terrain) details.push({ label: 'åœ°å½¢', value: getLandTerrain(a.land_terrain) });

            document.getElementById('landDetails').innerHTML = details.map(d => `
                <div class="info-row">
                    <span class="info-label">${d.label}</span>
                    <span class="info-value">${d.value}</span>
                </div>
            `).join('');
        }

        // åŠå…¬å®¤ä¿¡æ¯
        function renderOfficeInfo(a) {
            document.getElementById('officeInfoSection').classList.remove('hidden');

            const details = [];
            if (a.floor_area) details.push({ label: 'åŠå…¬é¢ç§¯', value: `${a.floor_area}ã¡` });
            if (a.office_type) details.push({ label: 'åŠå…¬å®¤ç±»å‹', value: getOfficeType(a.office_type) });
            if (a.workstation_count) details.push({ label: 'å·¥ä½æ•°', value: `${a.workstation_count}ä¸ª` });
            if (a.floor_number && a.total_floors) {
                details.push({ label: 'æ¥¼å±‚', value: `${a.floor_number}/${a.total_floors}F` });
            } else if (a.floor_number) {
                details.push({ label: 'æ¥¼å±‚', value: `${a.floor_number}F` });
            }
            if (a.building_year) details.push({ label: 'å»ºç­‘å¹´ä»½', value: `${a.building_year}å¹´` });
            if (a.orientation) details.push({ label: 'æœå‘', value: getOrientation(a.orientation) });
            if (a.parking_type) details.push({ label: 'åœè½¦ä½', value: getParkingType(a.parking_type) });

            document.getElementById('officeDetails').innerHTML = details.map(d => `
                <div class="info-row">
                    <span class="info-label">${d.label}</span>
                    <span class="info-value">${d.value}</span>
                </div>
            `).join('');
        }

        // è´¹ç”¨æ˜ç»†
        function renderFeeDetails(a) {
            const fees = [];
            fees.push({ label: 'ç§Ÿé‡‘/å”®ä»·', value: formatPrice(a.price) + (a.price_type ? getPriceUnitShort(a.price_type) : '') });

            if (a.has_security_deposit && a.security_deposit_amount) {
                fees.push({ label: 'ä¿è¯é‡‘', value: formatPrice(a.security_deposit_amount) });
            }

            // æ›´å¤šè´¹ç”¨å­—æ®µå¯æ ¹æ®æ•°æ®åº“æ·»åŠ 
            document.getElementById('feeDetails').innerHTML = fees.map(f => `
                <div class="info-row">
                    <span class="info-label">${f.label}</span>
                    <span class="info-value">${f.value}</span>
                </div>
            `).join('');
        }

        // è®¤è¯ä¿¡æ¯
        function renderVerificationInfo(a) {
            const badges = [];

            if (a.is_verified) {
                badges.push('<span class="badge verified-badge"><i class="fas fa-check-circle mr-1"></i>å¹³å°è®¤è¯</span>');
            }
            if (a.id_verified) {
                badges.push('<span class="badge badge-green"><i class="fas fa-id-card mr-1"></i>èº«ä»½è®¤è¯</span>');
            }
            if (a.qualification_verified) {
                badges.push('<span class="badge badge-green"><i class="fas fa-certificate mr-1"></i>èµ„è´¨è®¤è¯</span>');
            }
            if (a.business_license_verified) {
                badges.push('<span class="badge badge-blue"><i class="fas fa-building mr-1"></i>è¥ä¸šæ‰§ç…§</span>');
            }
            if (a.real_estate_license_verified) {
                badges.push('<span class="badge badge-blue"><i class="fas fa-home mr-1"></i>æˆ¿äº§ä¸­ä»‹èµ„è´¨</span>');
            }
            if (a.property_certificate_verified) {
                badges.push('<span class="badge badge-purple"><i class="fas fa-file-contract mr-1"></i>æˆ¿äº§è¯</span>');
            }
            if (a.has_license) {
                badges.push('<span class="badge badge-yellow"><i class="fas fa-award mr-1"></i>æŒæœ‰è®¸å¯è¯</span>');
            }

            if (badges.length > 0) {
                document.getElementById('verificationSection').classList.remove('hidden');
                document.getElementById('verificationBadges').innerHTML = badges.join('');
            }
        }

        // è”ç³»æ–¹å¼ï¼ˆç½‘é¡µç«¯ä¸æ˜¾ç¤ºï¼Œå¼•å¯¼ä¸‹è½½APPï¼‰
        function renderContactInfo(a) {
            document.getElementById('contactInfo').innerHTML = '<p class="text-gray-400"><i class="fas fa-lock mr-1"></i>ä¸‹è½½APPæŸ¥çœ‹è”ç³»æ–¹å¼</p>';
        }

        // ä½ç½®ä¿¡æ¯
        function renderLocationDetails(a) {
            const locations = [];

            if (a.location_prefecture) locations.push(`<p><i class="fas fa-map mr-2 text-indigo-400"></i>éƒ½é“åºœå¿: ${a.location_prefecture}</p>`);
            if (a.location_city) locations.push(`<p><i class="fas fa-city mr-2 text-indigo-400"></i>å¸‚åŒºç”ºæ‘: ${a.location_city}</p>`);
            if (a.location_region) locations.push(`<p><i class="fas fa-map-signs mr-2 text-indigo-400"></i>åŒºåŸŸ: ${a.location_region}</p>`);
            if (a.location_detail && !a.privacy_address_precise) {
                locations.push(`<p><i class="fas fa-map-marker-alt mr-2 text-indigo-400"></i>è¯¦ç»†åœ°å€: ${a.location_detail}</p>`);
            }

            if (locations.length > 0) {
                document.getElementById('locationDetails').innerHTML = locations.join('');
            }

            // åœ°å›¾é“¾æ¥
            const addressForMap = a.location_detail || `${a.location_prefecture || ''} ${a.location_city || ''}`;
            if (addressForMap.trim()) {
                document.getElementById('mapLink').href = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(addressForMap)}`;
            } else {
                document.getElementById('mapLink').classList.add('hidden');
            }
        }

        // ========== è¾…åŠ©å‡½æ•° ==========

        function getAccommodationType(type) {
            const types = {
                'rent': 'ç§Ÿæˆ¿',
                'sharehouse': 'åˆç§Ÿ',
                'homestay': 'æ°‘å®¿',
                'sale': 'æˆ¿å±‹ä¹°å–',
                'office': 'åŠå…¬å®¤',
                'warehouse': 'ä»“åº“',
                'land_rent': 'åœŸåœ°ç§Ÿèµ',
                'land_sale': 'åœŸåœ°ä¹°å–'
            };
            return types[type] || type || 'æˆ¿æº';
        }

        function getBuildingType(type) {
            const types = {
                'apartment': 'ã‚¢ãƒ‘ãƒ¼ãƒˆ',
                'mansion': 'ãƒãƒ³ã‚·ãƒ§ãƒ³',
                'house': 'ä¸€æˆ·å»º',
                'terrace': 'ãƒ†ãƒ©ã‚¹ãƒã‚¦ã‚¹',
                'other': 'å…¶ä»–'
            };
            return types[type] || type || '';
        }

        function getHostType(type) {
            const types = {
                'individual': 'ä¸ªäººæˆ¿ä¸œ',
                'agent': 'æˆ¿äº§ä¸­ä»‹',
                'company': 'ä¼ä¸š/å…¬å¸',
                'property_manager': 'ç‰©ä¸šç®¡ç†'
            };
            return types[type] || 'æˆ¿ä¸œ';
        }

        function getOrientation(o) {
            const orientations = {
                'north': 'åŒ—',
                'south': 'å—',
                'east': 'ä¸œ',
                'west': 'è¥¿',
                'northeast': 'ä¸œåŒ—',
                'northwest': 'è¥¿åŒ—',
                'southeast': 'ä¸œå—',
                'southwest': 'è¥¿å—'
            };
            return orientations[o] || o || '';
        }

        function getBuildingStructure(s) {
            const structures = {
                'wood': 'æœ¨é€ ',
                'steel': 'é’¢ç»“æ„',
                'rc': 'RCï¼ˆé’¢ç­‹æ··å‡åœŸï¼‰',
                'src': 'SRCï¼ˆé’¢éª¨é’¢ç­‹æ··å‡åœŸï¼‰',
                'light_steel': 'è½»é’¢ç»“æ„',
                'block': 'ç –å—ç»“æ„',
                'other': 'å…¶ä»–'
            };
            return structures[s] || s || '';
        }

        function getRenovationStatus(s) {
            const statuses = {
                'new': 'æ–°å»º',
                'renovated': 'å·²è£…ä¿®',
                'original': 'åŸçŠ¶',
                'partial': 'éƒ¨åˆ†è£…ä¿®'
            };
            return statuses[s] || s || '';
        }

        function getParkingType(t) {
            const types = {
                'none': 'æ— ',
                'included': 'å«åœè½¦ä½',
                'optional': 'å¯é€‰ï¼ˆå¦ä»˜è´¹ï¼‰',
                'nearby': 'é™„è¿‘æœ‰åœè½¦åœº'
            };
            return types[t] || t || '';
        }

        function getPetPolicy(p) {
            const policies = {
                'allowed': 'å¯å…»å® ç‰©',
                'negotiable': 'å¯åå•†',
                'not_allowed': 'ä¸å¯å…»å® ç‰©',
                'small_only': 'ä»…é™å°å‹å® ç‰©'
            };
            return policies[p] || p || '';
        }

        function getWarehouseMaterial(m) {
            const materials = {
                'steel': 'é’¢ç»“æ„',
                'concrete': 'æ··å‡åœŸ',
                'prefab': 'é¢„åˆ¶æ¿',
                'other': 'å…¶ä»–'
            };
            return materials[m] || m || '';
        }

        function getTemperatureControl(t) {
            const controls = {
                'none': 'æ— ',
                'air_conditioned': 'ç©ºè°ƒ',
                'refrigerated': 'å†·è—',
                'frozen': 'å†·å†»',
                'heated': 'åŠ çƒ­'
            };
            return controls[t] || t || '';
        }

        function getSecurityLevel(l) {
            const levels = {
                'basic': 'åŸºæœ¬',
                'standard': 'æ ‡å‡†',
                'high': 'é«˜çº§',
                'premium': 'é¡¶çº§'
            };
            return levels[l] || l || '';
        }

        function getLandType(t) {
            const types = {
                'residential': 'ä½å®…ç”¨åœ°',
                'commercial': 'å•†ä¸šç”¨åœ°',
                'industrial': 'å·¥ä¸šç”¨åœ°',
                'agricultural': 'å†œä¸šç”¨åœ°',
                'mixed': 'æ··åˆç”¨åœ°'
            };
            return types[t] || t || '';
        }

        function getLandZoning(z) {
            const zonings = {
                'category_1_low_residential': 'ç¬¬ä¸€ç§ä½å±‚ä½å±…ä¸“ç”¨åœ°åŸŸ',
                'category_2_low_residential': 'ç¬¬äºŒç§ä½å±‚ä½å±…ä¸“ç”¨åœ°åŸŸ',
                'category_1_mid_high_residential': 'ç¬¬ä¸€ç§ä¸­é«˜å±‚ä½å±…ä¸“ç”¨åœ°åŸŸ',
                'category_2_mid_high_residential': 'ç¬¬äºŒç§ä¸­é«˜å±‚ä½å±…ä¸“ç”¨åœ°åŸŸ',
                'category_1_residential': 'ç¬¬ä¸€ç§ä½å±…åœ°åŸŸ',
                'category_2_residential': 'ç¬¬äºŒç§ä½å±…åœ°åŸŸ',
                'quasi_residential': 'å‡†ä½å±…åœ°åŸŸ',
                'neighborhood_commercial': 'è¿‘é‚»å•†ä¸šåœ°åŸŸ',
                'commercial': 'å•†ä¸šåœ°åŸŸ',
                'quasi_industrial': 'å‡†å·¥ä¸šåœ°åŸŸ',
                'industrial': 'å·¥ä¸šåœ°åŸŸ',
                'exclusive_industrial': 'å·¥ä¸šä¸“ç”¨åœ°åŸŸ'
            };
            return zonings[z] || z || '';
        }

        function getLandRoadAccess(r) {
            const accesses = {
                'public_road': 'å…¬é“',
                'private_road': 'ç§é“',
                'no_road': 'æ— æ¥é“',
                'two_sides': 'ä¸¤é¢æ¥é“',
                'corner': 'è§’åœ°'
            };
            return accesses[r] || r || '';
        }

        function getLandTerrain(t) {
            const terrains = {
                'flat': 'å¹³å¦',
                'slope': 'å€¾æ–œ',
                'irregular': 'ä¸è§„åˆ™',
                'filled': 'å¡«åœŸåœ°'
            };
            return terrains[t] || t || '';
        }

        function getOfficeType(t) {
            const types = {
                'private_office': 'ç‹¬ç«‹åŠå…¬å®¤',
                'shared_office': 'å…±äº«åŠå…¬',
                'coworking': 'Co-workingç©ºé—´',
                'virtual': 'è™šæ‹ŸåŠå…¬å®¤',
                'serviced': 'æœåŠ¡å¼åŠå…¬å®¤'
            };
            return types[t] || t || '';
        }

        function getPaymentMethod(m) {
            const methods = {
                'bank_transfer': 'é“¶è¡Œè½¬è´¦',
                'credit_card': 'ä¿¡ç”¨å¡',
                'cash': 'ç°é‡‘',
                'alipay': 'æ”¯ä»˜å®',
                'wechat_pay': 'å¾®ä¿¡æ”¯ä»˜',
                'paypay': 'PayPay',
                'convenience_store': 'ä¾¿åˆ©åº—æ”¯ä»˜'
            };
            return methods[m] || m || '';
        }

        function getPriceUnitShort(priceType) {
            const units = {
                'monthly': '/æœˆ',
                'daily': '/å¤©',
                'yearly': '/å¹´',
                'total': '',
                'sqm': '/ã¡'
            };
            return units[priceType] || '';
        }

        function getPriceLabelByType(priceType) {
            const labels = {
                'monthly': 'æœˆç§Ÿé‡‘',
                'daily': 'æ—¥ç§Ÿé‡‘',
                'yearly': 'å¹´ç§Ÿé‡‘',
                'total': 'æ€»ä»·',
                'sqm': 'å•ä»·',
                'sale': 'å”®ä»·'
            };
            return labels[priceType] || 'ä»·æ ¼';
        }

        function getFacilityIcon(facility) {
            const icons = {
                'ç©ºè°ƒ': 'fas fa-snowflake',
                'å†·æ°”': 'fas fa-snowflake',
                'æ´—è¡£æœº': 'fas fa-tshirt',
                'å†°ç®±': 'fas fa-box',
                'WiFi': 'fas fa-wifi',
                'ç½‘ç»œ': 'fas fa-wifi',
                'ç”µè§†': 'fas fa-tv',
                'å¨æˆ¿': 'fas fa-utensils',
                'å«ç”Ÿé—´': 'fas fa-toilet',
                'æµ´å®¤': 'fas fa-bath',
                'é˜³å°': 'fas fa-sun',
                'åœè½¦': 'fas fa-parking',
                'ç”µæ¢¯': 'fas fa-elevator',
                'å® ç‰©': 'fas fa-paw',
                'å®¶å…·': 'fas fa-couch',
                'åºŠ': 'fas fa-bed',
                'æš–æ°”': 'fas fa-fire',
                'åœ°æš–': 'fas fa-fire',
                'ç‡ƒæ°”': 'fas fa-fire-flame-simple',
                'ç›‘æ§': 'fas fa-video',
                'é—¨ç¦': 'fas fa-door-closed',
                'ä¿å®‰': 'fas fa-shield-alt',
                'å¥èº«': 'fas fa-dumbbell',
                'æ¸¸æ³³': 'fas fa-swimmer',
                'å‚¨è—': 'fas fa-archive',
                'æ™¾è¡£': 'fas fa-shirt'
            };
            for (const [key, icon] of Object.entries(icons)) {
                if (facility.includes(key)) return icon;
            }
            return 'fas fa-check';
        }
    </script>
</body>

</html>
