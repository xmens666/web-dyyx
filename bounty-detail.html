<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ±Ÿæ¹–æ­æ¦œè¯¦æƒ… - ä¸œç€›æ¸¸ä¾ </title>
    <meta name="description" content="ä¸œç€›æ¸¸ä¾ æ±Ÿæ¹–æ­æ¦œ - åœ¨æ—¥åäººæ±‚èŒæ‹›è˜å¹³å°">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#F59E0B">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .loading-spinner { animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .fade-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .gradient-job { background: linear-gradient(135deg, #F59E0B 0%, #D97706 50%, #B45309 100%); }
        .gradient-resume { background: linear-gradient(135deg, #3B82F6 0%, #2563EB 50%, #1D4ED8 100%); }
        .info-row { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #F3F4F6; }
        .info-row:last-child { border-bottom: none; }
        .info-label { color: #6B7280; font-size: 14px; }
        .info-value { color: #1F2937; font-weight: 500; font-size: 14px; text-align: right; }
        .section-card { background: white; border-radius: 12px; padding: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 16px; }
        .section-title { font-size: 16px; font-weight: 700; color: #1F2937; margin-bottom: 16px; display: flex; align-items: center; }
        .section-title i { margin-right: 8px; }
        .badge { display: inline-flex; align-items: center; padding: 4px 10px; border-radius: 9999px; font-size: 12px; font-weight: 500; margin-right: 6px; margin-bottom: 6px; }
        .badge-amber { background: #FEF3C7; color: #92400E; }
        .badge-blue { background: #DBEAFE; color: #1E40AF; }
        .badge-green { background: #D1FAE5; color: #065F46; }
        .badge-gray { background: #F3F4F6; color: #4B5563; }
        .salary-highlight { background: linear-gradient(135deg, #FEF3C7, #FDE68A); }
    </style>
</head>

<body class="bg-gray-50 min-h-screen">
    <!-- å¯¼èˆªæ  -->
    <nav class="fixed w-full bg-white/95 backdrop-blur-md shadow-sm z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <a href="index.html" class="flex items-center space-x-2">
                <span class="text-lg font-bold text-gray-800">ğŸ¯ ä¸œç€›æ¸¸ä¾ </span>
            </a>
            <a href="bounty.html" class="text-amber-500 text-sm hover:text-amber-600">
                <i class="fas fa-arrow-left mr-1"></i> è¿”å›åˆ—è¡¨
            </a>
        </div>
    </nav>

    <!-- ä¸»å†…å®¹åŒº -->
    <main class="pt-16 pb-24">
        <!-- åŠ è½½çŠ¶æ€ -->
        <div id="loading" class="flex flex-col items-center justify-center min-h-[60vh]">
            <div class="w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full loading-spinner"></div>
            <p class="mt-4 text-gray-500">æ­£åœ¨åŠ è½½...</p>
        </div>

        <!-- é”™è¯¯çŠ¶æ€ -->
        <div id="error" class="hidden flex flex-col items-center justify-center min-h-[60vh] px-4">
            <div class="w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mb-4">
                <i class="fas fa-exclamation-triangle text-red-500 text-3xl"></i>
            </div>
            <h2 class="text-xl font-bold text-gray-800 mb-2">å†…å®¹ä¸å­˜åœ¨</h2>
            <p class="text-gray-500 mb-6 text-center">è¯¥å†…å®¹å¯èƒ½å·²ä¸‹æ¶æˆ–é“¾æ¥æ— æ•ˆ</p>
            <a href="bounty.html" class="bg-amber-500 text-white px-6 py-2 rounded-full hover:bg-amber-600 transition">
                è¿”å›åˆ—è¡¨
            </a>
        </div>

        <!-- æ‹›è˜è¯¦æƒ… -->
        <div id="jobContent" class="hidden fade-in">
            <!-- å¤´éƒ¨ -->
            <header id="jobHeader" class="gradient-job pt-20 pb-8">
                <div class="container mx-auto px-4 text-white">
                    <div class="flex flex-wrap gap-2 mb-3" id="jobBadges"></div>
                    <h1 id="jobTitle" class="text-2xl font-bold mb-2"></h1>
                    <p id="jobCompany" class="text-white/80 text-lg mb-4"></p>
                    <div class="salary-highlight text-amber-900 inline-block px-4 py-2 rounded-lg font-bold text-xl" id="jobSalary"></div>
                </div>
            </header>

            <div class="container mx-auto px-4 py-6">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <!-- å·¦ä¾§ï¼šèŒä½è¯¦æƒ… -->
                    <div class="lg:col-span-2 space-y-4">
                        <!-- å·¥ä½œä¿¡æ¯ -->
                        <div class="section-card">
                            <h2 class="section-title">
                                <i class="fas fa-briefcase text-amber-500"></i>å·¥ä½œä¿¡æ¯
                            </h2>
                            <div id="jobInfo"></div>
                        </div>

                        <!-- èŒä½æè¿° -->
                        <div class="section-card">
                            <h2 class="section-title">
                                <i class="fas fa-file-alt text-blue-500"></i>èŒä½æè¿°
                            </h2>
                            <p id="jobDescription" class="text-gray-700 whitespace-pre-wrap leading-relaxed"></p>
                        </div>

                        <!-- ç¦åˆ©å¾…é‡ -->
                        <div id="benefitsSection" class="section-card hidden">
                            <h2 class="section-title">
                                <i class="fas fa-gift text-green-500"></i>ç¦åˆ©å¾…é‡
                            </h2>
                            <div id="jobBenefits" class="flex flex-wrap"></div>
                        </div>
                    </div>

                    <!-- å³ä¾§ï¼šè”ç³»ä¿¡æ¯ -->
                    <div class="space-y-4">
                        <!-- æ‹›è˜æ–¹ä¿¡æ¯ -->
                        <div class="section-card">
                            <h2 class="section-title">
                                <i class="fas fa-building text-amber-500"></i>æ‹›è˜æ–¹
                            </h2>
                            <div class="flex items-center gap-4 mb-4">
                                <img id="recruiterAvatar" src="" alt="å¤´åƒ" class="w-14 h-14 rounded-full object-cover border-2 border-gray-100">
                                <div>
                                    <h3 id="recruiterName" class="font-bold text-gray-800"></h3>
                                    <p id="recruiterCompany" class="text-gray-500 text-sm"></p>
                                </div>
                            </div>
                            <div class="text-sm text-gray-400 flex items-center">
                                <i class="fas fa-lock mr-2"></i>ä¸‹è½½APPæŸ¥çœ‹è”ç³»æ–¹å¼
                            </div>
                        </div>

                        <!-- ä¸‹è½½APP -->
                        <div class="bg-gradient-to-br from-amber-500 to-orange-600 rounded-xl p-6 text-white">
                            <div class="text-center">
                                <div class="w-14 h-14 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <i class="fas fa-paper-plane text-2xl"></i>
                                </div>
                                <h3 class="font-bold text-lg mb-2">ç«‹å³æŠ•é€’ç®€å†</h3>
                                <p class="text-white/80 text-sm mb-4">ä¸‹è½½APPç›´æ¥è”ç³»æ‹›è˜æ–¹</p>
                                <a href="https://pub-3e154ce6d5c8487f833628106145e7a2.r2.dev/APK/dongyingyouxia_v1.5.3.apk" download
                                   class="block bg-white text-amber-600 py-3 rounded-xl font-bold hover:bg-amber-50 transition">
                                    <i class="fab fa-android mr-2"></i> ä¸‹è½½APPæŠ•é€’
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ç®€å†è¯¦æƒ… -->
        <div id="resumeContent" class="hidden fade-in">
            <!-- å¤´éƒ¨ -->
            <header id="resumeHeader" class="gradient-resume pt-20 pb-8">
                <div class="container mx-auto px-4 text-white">
                    <div class="flex items-center gap-6">
                        <img id="resumePhoto" src="" alt="ç…§ç‰‡" class="w-24 h-24 rounded-full object-cover border-4 border-white/30">
                        <div>
                            <h1 id="resumeName" class="text-2xl font-bold mb-2"></h1>
                            <p id="resumeExpectedSalary" class="text-white/80 text-lg"></p>
                            <div class="flex flex-wrap gap-2 mt-3" id="resumeBadges"></div>
                        </div>
                    </div>
                </div>
            </header>

            <div class="container mx-auto px-4 py-6">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <!-- å·¦ä¾§ï¼šç®€å†è¯¦æƒ… -->
                    <div class="lg:col-span-2 space-y-4">
                        <!-- åŸºæœ¬ä¿¡æ¯ -->
                        <div class="section-card">
                            <h2 class="section-title">
                                <i class="fas fa-user text-blue-500"></i>åŸºæœ¬ä¿¡æ¯
                            </h2>
                            <div id="resumeBasicInfo"></div>
                        </div>

                        <!-- æœŸæœ›èŒä½ -->
                        <div id="desiredJobsSection" class="section-card hidden">
                            <h2 class="section-title">
                                <i class="fas fa-bullseye text-amber-500"></i>æœŸæœ›èŒä½
                            </h2>
                            <div id="desiredJobs" class="flex flex-wrap"></div>
                        </div>

                        <!-- å·¥ä½œç»å† -->
                        <div id="workExpSection" class="section-card hidden">
                            <h2 class="section-title">
                                <i class="fas fa-briefcase text-green-500"></i>å·¥ä½œç»å†
                            </h2>
                            <div id="workExperiences"></div>
                        </div>

                        <!-- æ•™è‚²ç»å† -->
                        <div id="eduExpSection" class="section-card hidden">
                            <h2 class="section-title">
                                <i class="fas fa-graduation-cap text-purple-500"></i>æ•™è‚²ç»å†
                            </h2>
                            <div id="eduExperiences"></div>
                        </div>
                    </div>

                    <!-- å³ä¾§ï¼šè”ç³» -->
                    <div class="space-y-4">
                        <!-- ä¸‹è½½APP -->
                        <div class="bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl p-6 text-white">
                            <div class="text-center">
                                <div class="w-14 h-14 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <i class="fas fa-comments text-2xl"></i>
                                </div>
                                <h3 class="font-bold text-lg mb-2">è”ç³»æ±‚èŒè€…</h3>
                                <p class="text-white/80 text-sm mb-4">ä¸‹è½½APPç›´æ¥è”ç³»æ²Ÿé€š</p>
                                <a href="https://pub-3e154ce6d5c8487f833628106145e7a2.r2.dev/APK/dongyingyouxia_v1.5.3.apk" download
                                   class="block bg-white text-blue-600 py-3 rounded-xl font-bold hover:bg-blue-50 transition">
                                    <i class="fab fa-android mr-2"></i> ä¸‹è½½APPè”ç³»
                                </a>
                            </div>
                        </div>

                        <!-- ç»Ÿè®¡ -->
                        <div class="section-card">
                            <h2 class="section-title">
                                <i class="fas fa-chart-bar text-indigo-500"></i>æµè§ˆç»Ÿè®¡
                            </h2>
                            <div class="text-center">
                                <p id="resumeViewCount" class="text-3xl font-bold text-blue-500">0</p>
                                <p class="text-sm text-gray-500">æµè§ˆæ¬¡æ•°</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- åº•éƒ¨å›ºå®šæ  -->
    <div id="bottomBar" class="hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-3 z-40">
        <div class="container mx-auto flex items-center justify-between gap-4">
            <div class="flex-shrink-0">
                <p class="text-gray-500 text-xs" id="bottomLabel"></p>
                <p class="text-amber-600 font-bold text-xl" id="bottomValue"></p>
            </div>
            <a href="https://pub-3e154ce6d5c8487f833628106145e7a2.r2.dev/APK/dongyingyouxia_v1.5.3.apk" download
               class="flex-1 bg-gradient-to-r from-amber-500 to-orange-600 text-white text-center py-3 rounded-xl font-bold hover:opacity-90 transition">
                <i class="fab fa-android mr-2"></i> <span id="bottomAction">ä¸‹è½½APP</span>
            </a>
        </div>
    </div>

    <!-- é¡µè„š -->
    <footer class="bg-gray-900 text-white py-8">
        <div class="container mx-auto px-4 text-center">
            <p class="text-gray-400 text-sm mb-2">ä¸œç€›æ¸¸ä¾  - åœ¨æ—¥åäººçš„ç”Ÿæ´»æœåŠ¡å¹³å°</p>
            <p class="text-gray-500 text-xs">&copy; 2026 æ ªå¼ä¼šç¤¾æ˜‡é™½å•†äº‹</p>
        </div>
    </footer>

    <script src="api-config.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const type = getUrlParam('type');
            const id = getUrlParam('id');

            if (!id) {
                showError();
                return;
            }

            try {
                if (type === 'resume') {
                    await loadResume(id);
                } else {
                    await loadJob(id);
                }
            } catch (err) {
                console.error('åŠ è½½å¤±è´¥:', err);
                showError();
            }
        });

        function showError() {
            document.getElementById('loading').classList.add('hidden');
            document.getElementById('error').classList.remove('hidden');
        }

        // ==================== æ‹›è˜è¯¦æƒ… ====================

        async function loadJob(id) {
            const data = await supabaseQuery('job_invitations', `?id=eq.${id}&select=*,users:recruiter_id(id,nickname,avatar_url)`);
            const job = data[0];

            if (!job) {
                showError();
                return;
            }

            renderJob(job);
        }

        function renderJob(job) {
            document.title = `${job.position_name} - ${job.company_name} - æ±Ÿæ¹–æ­æ¦œ`;

            // æ ‡ç­¾
            const badges = [];
            badges.push(`<span class="badge badge-amber">${getJobCategory(job.job_category)}</span>`);
            badges.push(`<span class="badge badge-blue">${getEmploymentType(job.employment_type)}</span>`);
            if (job.work_mode) badges.push(`<span class="badge badge-gray">${getWorkMode(job.work_mode)}</span>`);
            document.getElementById('jobBadges').innerHTML = badges.join('');

            // åŸºæœ¬ä¿¡æ¯
            document.getElementById('jobTitle').textContent = job.position_name;
            document.getElementById('jobCompany').textContent = job.company_name;
            document.getElementById('jobSalary').textContent = getSalaryDisplay(job.salary_type, job.salary_amount);

            // å·¥ä½œä¿¡æ¯
            const infos = [];
            if (job.work_city) infos.push({ label: 'å·¥ä½œåŸå¸‚', value: job.work_city });
            if (job.work_address) infos.push({ label: 'å·¥ä½œåœ°å€', value: job.work_address });
            if (job.work_days) infos.push({ label: 'å·¥ä½œæ—¥', value: job.work_days });
            if (job.work_hours) infos.push({ label: 'å·¥ä½œæ—¶é—´', value: job.work_hours });
            if (job.overtime) infos.push({ label: 'åŠ ç­æƒ…å†µ', value: job.overtime });

            document.getElementById('jobInfo').innerHTML = infos.map(i => `
                <div class="info-row">
                    <span class="info-label">${i.label}</span>
                    <span class="info-value">${i.value}</span>
                </div>
            `).join('');

            // èŒä½æè¿°
            document.getElementById('jobDescription').textContent = job.job_description || 'æš‚æ— æè¿°';

            // ç¦åˆ©å¾…é‡
            const benefits = [];
            if (job.pension) benefits.push({ icon: 'fa-umbrella-beach', text: 'å¹´é‡‘åŠ å…¥' });
            if (job.social_insurance) benefits.push({ icon: 'fa-shield-alt', text: 'ç¤¾ä¼šä¿é™©' });
            if (job.transport_allowance) benefits.push({ icon: 'fa-train', text: 'äº¤é€šè¡¥è´´' });
            if (job.housing_allowance) benefits.push({ icon: 'fa-home', text: 'ä½æˆ¿è¡¥è´´' });
            if (job.bonus_times) benefits.push({ icon: 'fa-gift', text: `å¹´ç»ˆå¥–${job.bonus_times}æ¬¡` });
            if (job.paid_leave) benefits.push({ icon: 'fa-calendar-check', text: 'å¸¦è–ªä¼‘å‡' });
            if (job.other_benefits) benefits.push({ icon: 'fa-star', text: job.other_benefits });

            if (benefits.length > 0) {
                document.getElementById('benefitsSection').classList.remove('hidden');
                document.getElementById('jobBenefits').innerHTML = benefits.map(b => `
                    <span class="badge badge-green"><i class="fas ${b.icon} mr-1"></i>${b.text}</span>
                `).join('');
            }

            // æ‹›è˜æ–¹ä¿¡æ¯
            const recruiterAvatar = job.users?.avatar_url || DEFAULT_AVATAR;
            document.getElementById('recruiterAvatar').src = recruiterAvatar;
            document.getElementById('recruiterAvatar').onerror = function() { this.src = DEFAULT_AVATAR; };
            document.getElementById('recruiterName').textContent = job.contact_person || job.users?.nickname || 'æ‹›è˜æ–¹';
            document.getElementById('recruiterCompany').textContent = job.company_name;

            // è”ç³»æ–¹å¼å·²éšè—ï¼Œå¼•å¯¼ç”¨æˆ·ä¸‹è½½APP

            // åº•éƒ¨æ 
            document.getElementById('bottomLabel').textContent = 'è–ªèµ„å¾…é‡';
            document.getElementById('bottomValue').textContent = getSalaryDisplay(job.salary_type, job.salary_amount);
            document.getElementById('bottomAction').textContent = 'ç«‹å³æŠ•é€’';

            // æ˜¾ç¤ºå†…å®¹
            document.getElementById('loading').classList.add('hidden');
            document.getElementById('jobContent').classList.remove('hidden');
            document.getElementById('bottomBar').classList.remove('hidden');
        }

        // ==================== ç®€å†è¯¦æƒ… ====================

        async function loadResume(id) {
            const data = await supabaseQuery('resumes', `?id=eq.${id}&select=*,users:user_id(id,nickname,avatar_url)`);
            const resume = data[0];

            if (!resume) {
                showError();
                return;
            }

            renderResume(resume);
        }

        function renderResume(resume) {
            const name = resume.name_cn || resume.name_jp || resume.users?.nickname || 'æ±‚èŒè€…';
            document.title = `${name}çš„ç®€å† - æ±Ÿæ¹–æ­æ¦œ`;

            // å¤´åƒ
            const photo = resume.photo_url || resume.users?.avatar_url || DEFAULT_AVATAR;
            document.getElementById('resumePhoto').src = photo;
            document.getElementById('resumePhoto').onerror = function() { this.src = DEFAULT_AVATAR; };

            // å§“å
            document.getElementById('resumeName').textContent = name;

            // æœŸæœ›è–ªèµ„
            const salary = resume.salary_min && resume.salary_max
                ? `æœŸæœ›è–ªèµ„: ${resume.salary_min / 10000}~${resume.salary_max / 10000}ä¸‡/æœˆ`
                : (resume.salary_min ? `æœŸæœ›è–ªèµ„: ${resume.salary_min / 10000}ä¸‡ä»¥ä¸Š` : 'è–ªèµ„é¢è®®');
            document.getElementById('resumeExpectedSalary').textContent = salary;

            // æ ‡ç­¾
            const badges = [];
            if (resume.city_cn || resume.city_jp) {
                badges.push(`<span class="badge badge-blue"><i class="fas fa-map-marker-alt mr-1"></i>${resume.city_cn || resume.city_jp}</span>`);
            }
            document.getElementById('resumeBadges').innerHTML = badges.join('');

            // åŸºæœ¬ä¿¡æ¯
            const basicInfos = [];
            if (resume.gender) basicInfos.push({ label: 'æ€§åˆ«', value: getGender(resume.gender) });
            if (resume.birthday) basicInfos.push({ label: 'å¹´é¾„', value: calculateAge(resume.birthday) + 'å²' });
            if (resume.nationality_cn || resume.nationality_jp) basicInfos.push({ label: 'å›½ç±', value: resume.nationality_cn || resume.nationality_jp });
            if (resume.city_cn || resume.city_jp) basicInfos.push({ label: 'æ‰€åœ¨åœ°', value: resume.city_cn || resume.city_jp });

            document.getElementById('resumeBasicInfo').innerHTML = basicInfos.map(i => `
                <div class="info-row">
                    <span class="info-label">${i.label}</span>
                    <span class="info-value">${i.value}</span>
                </div>
            `).join('');

            // æœŸæœ›èŒä½
            const desiredJobs = resume.desired_jobs || [];
            if (desiredJobs.length > 0) {
                document.getElementById('desiredJobsSection').classList.remove('hidden');
                document.getElementById('desiredJobs').innerHTML = desiredJobs.map(j => `
                    <span class="badge badge-amber">${j}</span>
                `).join('');
            }

            // å·¥ä½œç»å†
            const workExp = resume.work_experiences || [];
            if (workExp.length > 0) {
                document.getElementById('workExpSection').classList.remove('hidden');
                document.getElementById('workExperiences').innerHTML = workExp.map(w => `
                    <div class="mb-4 pb-4 border-b border-gray-100 last:border-0">
                        <div class="flex justify-between items-start mb-2">
                            <div>
                                <h4 class="font-bold text-gray-800">${w.position || 'èŒä½'}</h4>
                                <p class="text-amber-600">${w.company || 'å…¬å¸'}</p>
                            </div>
                            <span class="text-sm text-gray-400">${w.start_date || ''} ~ ${w.end_date || 'è‡³ä»Š'}</span>
                        </div>
                        ${w.description ? `<p class="text-gray-600 text-sm mt-2">${w.description}</p>` : ''}
                    </div>
                `).join('');
            }

            // æ•™è‚²ç»å†
            const eduExp = resume.education_experiences || [];
            if (eduExp.length > 0) {
                document.getElementById('eduExpSection').classList.remove('hidden');
                document.getElementById('eduExperiences').innerHTML = eduExp.map(e => `
                    <div class="mb-4 pb-4 border-b border-gray-100 last:border-0">
                        <div class="flex justify-between items-start mb-2">
                            <div>
                                <h4 class="font-bold text-gray-800">${e.school || 'å­¦æ ¡'}</h4>
                                <p class="text-blue-600">${e.major || ''} ${e.degree ? 'Â· ' + e.degree : ''}</p>
                            </div>
                            <span class="text-sm text-gray-400">${e.start_date || ''} ~ ${e.end_date || ''}</span>
                        </div>
                    </div>
                `).join('');
            }

            // æµè§ˆç»Ÿè®¡
            document.getElementById('resumeViewCount').textContent = resume.view_count || 0;

            // åº•éƒ¨æ 
            document.getElementById('bottomLabel').textContent = 'æœŸæœ›è–ªèµ„';
            document.getElementById('bottomValue').textContent = resume.salary_min
                ? `${resume.salary_min / 10000}ä¸‡+/æœˆ`
                : 'é¢è®®';
            document.getElementById('bottomAction').textContent = 'è”ç³»æ±‚èŒè€…';

            // æ˜¾ç¤ºå†…å®¹
            document.getElementById('loading').classList.add('hidden');
            document.getElementById('resumeContent').classList.remove('hidden');
            document.getElementById('bottomBar').classList.remove('hidden');
        }

        // ==================== è¾…åŠ©å‡½æ•° ====================

        function getSalaryDisplay(type, amount) {
            if (!amount) return 'é¢è®®';
            const typeLabels = {
                'monthly': '/æœˆ',
                'hourly': '/æ—¶',
                'daily': '/å¤©',
                'yearly': '/å¹´',
                'negotiable': ''
            };
            return amount + (typeLabels[type] || '');
        }

        function getEmploymentType(type) {
            const types = {
                'full_time': 'å…¨èŒ',
                'part_time': 'å…¼èŒ',
                'contract': 'åˆåŒå·¥',
                'intern': 'å®ä¹ ',
                'freelance': 'è‡ªç”±èŒä¸š',
                'temporary': 'ä¸´æ—¶å·¥'
            };
            return types[type] || type || 'å…¨èŒ';
        }

        function getJobCategory(category) {
            const categories = {
                'it': 'IT/äº’è”ç½‘',
                'sales': 'é”€å”®',
                'service': 'æœåŠ¡ä¸š',
                'restaurant': 'é¤é¥®',
                'retail': 'é›¶å”®',
                'manufacturing': 'åˆ¶é€ ä¸š',
                'education': 'æ•™è‚²',
                'healthcare': 'åŒ»ç–—',
                'finance': 'é‡‘è',
                'logistics': 'ç‰©æµ',
                'construction': 'å»ºç­‘',
                'other': 'å…¶ä»–'
            };
            return categories[category] || category || 'å…¶ä»–';
        }

        function getWorkMode(mode) {
            const modes = {
                'onsite': 'ç°åœºåŠå…¬',
                'remote': 'è¿œç¨‹åŠå…¬',
                'hybrid': 'æ··åˆåŠå…¬'
            };
            return modes[mode] || mode || '';
        }

        function getGender(gender) {
            const genders = {
                'male': 'ç”·',
                'female': 'å¥³',
                'other': 'å…¶ä»–'
            };
            return genders[gender] || gender || '';
        }

        function calculateAge(birthday) {
            if (!birthday) return '';
            const birth = new Date(birthday);
            const today = new Date();
            let age = today.getFullYear() - birth.getFullYear();
            const m = today.getMonth() - birth.getMonth();
            if (m < 0 || (m === 0 && today.getDate() < birth.getDate())) {
                age--;
            }
            return age;
        }
    </script>
</body>
</html>
